## 需求梳理

### ① 输入
- 小说文本
- BGM音乐文件
- 视频素材目录（分横屏和竖屏）
- 图片素材目录（分横屏和竖屏）


### ② 输出
- 一个视频


### ③ 处理流程
1. 文本清洗（剔除脏数据）
2. 文本切段成字幕
3. 逐句字幕转语音(TTS)
4. 短语音拼接成完整语音，并生成SRT字幕文件
5. 将字幕文件，小说配音文件，BGM音乐文件，视频素材目录，图片素材目录通过
	1. 以配音文件时长为最终视频时长
	2. BGM音乐一直循环，音量调小到10%
	3. 画面显示为视频素材拼接(随机选取)，若视频素材时长不够，用图片素材显示
``` mermaid
flowchart TD
    Start([开始]) --> A[文本清洗<br>剔除脏数据]
    A --> B[文本切段成字幕]
    B --> C[逐句字幕转语音<br>TTS]
    C --> D[短语音拼接成完整语音<br>并生成SRT字幕文件]
    D --> E{素材输入}
    
    E --> F[字幕文件]
    E --> G[小说配音文件]
    E --> H[BGM音乐文件]
    E --> I[视频素材目录]
    E --> J[图片素材目录]
    
    F & G & H & I & J --> K[视频合成处理]
    
    K --> L[以配音文件时长为最终视频时长]
    K --> M[BGM音乐一直循环<br>音量调小到10%]
    K --> N[画面显示为视频素材拼接<br>随机选取视频素材<br>若时长不够则用图片素材显示]
    
    L & M & N --> Finish([视频生成完成])
```


